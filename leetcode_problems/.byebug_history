n
str[idx]
idx
str[idx] == nil
str[idx] == longest_prefix[idx] || str[idx] == nil
str[idx] == longest_prefix[idx]
str[idx]
s
str
s
str
x
idx
s
n
